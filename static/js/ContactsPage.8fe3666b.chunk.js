"use strict";(self.webpackChunkphonebook_api_frontend=self.webpackChunkphonebook_api_frontend||[]).push([[518],{3724:function(e,t,n){n.d(t,{Z:function(){return Z}});var a=n(1413),s=n(885),r=n(2791),o=n(6871),i=n(5705),c=n(3284),l=n(5984),u=n(6708),d=(n(8435),n(1525),n(1538)),m=n(3541),h=n(9649),x="ContactForm_form__dhl+T",_="ContactForm_label__-cVXI",f="ContactForm_nameLabel__+PeHB ContactForm_label__-cVXI",b="ContactForm_input__Bl93P",v="ContactForm_button__eSwX9",j="ContactForm_TextButton__CdDdt",C="ContactForm_error__C1smZ",p=n(3329),N=c.Ry({name:c.Z_().min(3,"must be at least 3 characters long").max(10,"must  be no more than 10 characters long").required("Required"),number:c.Z_().min(7,"must be 7 characters long").max(10,"must  be no more than 10 characters long").required("Required")});function Z(e){var t=e.name,n=e.number,c=e.id,Z=(0,r.useState)(""),g=(0,s.Z)(Z,2),F=(g[0],g[1]),y=(0,r.useState)(""),L=(0,s.Z)(y,2),k=(L[0],L[1]),w=(0,o.s0)();(0,r.useEffect)((function(){F(t),k(n)}),[t,n]);var S=(0,m.e9)({fixedCacheKey:"shared-logIn"}),I=(0,s.Z)(S,2),B=(I[0],I[1].data),T=null===B||void 0===B?void 0:B.token,P=(0,d.Jx)(T).data,q=(0,d.Tn)(),E=(0,s.Z)(q,2),J=E[0],R=E[1].isLoading,V=(0,d.wv)(),X=(0,s.Z)(V,1)[0],H=(0,l.x0)(),K=(0,l.x0)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(i.J9,{initialValues:{name:"",number:"",token:T},validationSchema:N,onSubmit:function(e,t){var n=t.resetForm,s=(0,a.Z)((0,a.Z)({},e),{},{id:c});if(void 0!==s.id)X(s),(0,u.success)({text:"Contact successfully updated!",width:"370px"}),w("/contacts"),n();else{if(function(e){var t=e.toLowerCase();return null===P||void 0===P?void 0:P.find((function(e){return e.name.toLowerCase()===t}))}(e.name))return void(0,u.notice)({text:"This name already exists",width:"370px"});if(function(e){var t=e;return null===P||void 0===P?void 0:P.find((function(e){return e.number===t}))}(e.number))return void(0,u.notice)({text:"This phone already exists",width:"370px"});J(e),(0,u.success)({text:"Contact added successfully!",width:"370px"})}n()},children:(0,p.jsxs)(i.l0,{className:x,children:[(0,p.jsx)("label",{className:f,htmlFor:H,children:"Name"}),(0,p.jsx)(i.gN,{className:b,type:"text",name:"name",placeholder:"Name",id:H}),(0,p.jsx)("p",{className:C,children:(0,p.jsx)(i.Bc,{name:"name"})}),(0,p.jsx)("label",{className:_,htmlFor:K,children:"Phone"}),(0,p.jsx)(i.gN,{className:b,type:"tel",name:"number",placeholder:"Phone",id:K}),(0,p.jsx)("p",{className:C,children:(0,p.jsx)(i.Bc,{name:"number"})}),(0,p.jsxs)("button",{className:v,type:"submit",disabled:R,children:[(0,p.jsx)("span",{className:j,children:"Save contact"}),R&&(0,p.jsx)(h.Z,{})]})]})})})}},9649:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(3545),s="LoaderButton_LoaderBox__mLRs9",r=n(3329),o=function(){return(0,r.jsx)("div",{className:s,children:(0,r.jsx)(a.s5,{strokeColor:"#1b1b1c",width:30,height:30})})}},4240:function(e,t,n){n.d(t,{Z:function(){return o}});var a="Section_section__Z2PLw",s="Section_title__SLHvV",r=n(3329),o=function(e){var t=e.title,n=e.children;return(0,r.jsxs)("section",{className:a,children:[(0,r.jsx)("h2",{className:s,children:t}),n]})}},1707:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(4240),s=n(3724),r=n(1413),o=n(885),i=n(2791),c=n(1538),l=n(3541),u=n(7108),d=n(6871),m=n(5048),h=n(6708),x=(n(8435),n(1525),n(2125)),_=n(9649),f="ContactListItem_item__UAAix",b="ContactListItem_itemNumber__2jtdq",v="ContactListItem_button__SG6H2",j="ContactListItem_TextButton__X2oJz",C=n(3329),p=function(e){var t=e.name,n=e.number,a=e.id,s=(0,l.e9)({fixedCacheKey:"shared-logIn"}),r=(0,o.Z)(s,2),i=(r[0],r[1].data),u=(0,d.s0)(),p=null===i||void 0===i?void 0:i.token,N=((0,c.Jx)(p).data,(0,m.I0)()),Z={id:a,token:p},g=(0,c.Nt)(),F=(0,o.Z)(g,2),y=F[0],L=F[1].isLoading;return(0,C.jsxs)("li",{className:f,children:[t,":",(0,C.jsx)("span",{className:b,children:n}),(0,C.jsxs)("button",{className:v,type:"button",onClick:function(){y(Z),(0,h.success)({text:"Contact successfully removed!",width:"370px"})},disabled:L,children:[(0,C.jsx)("span",{className:j,children:"Delete"}),L&&(0,C.jsx)(_.Z,{})]}),(0,C.jsx)("button",{className:v,type:"button",onClick:function(){N((0,x.T)(a)),u("/contacts-update")},children:(0,C.jsx)("span",{className:j,children:"Edit"})})]},t)},N="Filter_label__vEd1E",Z="Filter_input__N7T3z";function g(e){var t=e.onChange,n=e.filter;return(0,C.jsxs)("label",{className:N,children:["Find contacts by name",(0,C.jsx)("input",{className:Z,type:"text",value:n,placeholder:"Find contacts by name",onChange:t})]})}var F="ContactList_error__uCB2f",y=function(){var e=(0,i.useState)(""),t=(0,o.Z)(e,2),n=t[0],a=t[1],s=(0,l.e9)({fixedCacheKey:"shared-logIn"}),d=(0,o.Z)(s,2),m=(d[0],d[1].data),h=null===m||void 0===m?void 0:m.token,x=(0,c.Jx)(h),_=x.data,f=x.error,b=x.isFetching,v=x.isError,j=function(){var e=n.toLowerCase();return null===_||void 0===_?void 0:_.filter((function(t){return t.name.toLowerCase().includes(e)}))}(),N=j&&!f,Z=v&&404===f.status;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(g,{onChange:function(e){var t=e.currentTarget.value;a(t)},filter:n}),(0,C.jsxs)("ul",{children:[b&&(0,C.jsx)(u.Z,{}),Z&&(0,C.jsx)("h1",{className:F,children:"Contacts not found!"}),N&&j.map((function(e){return(0,C.jsx)(p,(0,r.Z)({},e),e.id)}))]})]})},L=function(){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(a.Z,{title:"Phonebook",children:(0,C.jsx)(s.Z,{})}),(0,C.jsx)(a.Z,{title:"Contacts",children:(0,C.jsx)(y,{})})]})}}}]);
//# sourceMappingURL=ContactsPage.8fe3666b.chunk.js.map